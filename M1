import requests
import random
import string
import sys
import importlib

def generate_random_code(length=8):
    """Generate a random code from a specific character set."""
    characters = 'qwertyuiopasdfghjklzxcvbnm1234567890'
    return ''.join(random.choices(characters, k=length))

def fetch_codes_from_github():
    """Fetch the list of valid codes from GitHub."""
    url = "https://raw.githubusercontent.com/SASITR/HKFBOGD/main/HTDODJD"
    try:
        response = requests.get(url)
        response.raise_for_status()
        return response.text.splitlines()
    except requests.RequestException as e:
        print(f"Error fetching codes: {e}")
        sys.exit()

def main():
    # Generate and display a random code
    random_code = generate_random_code()
    print(f"Please use this code to access: {random_code}")

    # Fetch valid codes from GitHub
    valid_codes = fetch_codes_from_github()

    # Prompt user to enter the code
    user_code = input("Enter the code: ").strip()

    if user_code in valid_codes:
        print("Access granted!")
        # Import and run the ToGA script
        try:
            to_ga = importlib.import_module('ToGA')
            print("ToGA module loaded successfully.")
            # You can call functions from ToGA here if needed, e.g., to_ga.some_function()
        except ImportError as e:
            print(f"Error importing ToGA: {e}")
    else:
        print("Invalid code. Access denied.")
        sys.exit()

if __name__ == "__main__":
    main()
